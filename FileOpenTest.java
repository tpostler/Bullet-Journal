package cs3500.pa05.model;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;

import java.io.File;
import java.nio.file.Path;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

/**
 * Tests the file open class
 */
public class FileOpenTest {
  private FileOpen fileOpen;

  /**
   * sets up the reuired objects for the file opener to work
   */
  @BeforeEach
  public void setUp() {
    File file = new File("src/test/resources/Tester.bujo");
    Path path = Path.of(file.getPath());
    fileOpen = new FileOpen(path);
  }

  /**
   * tests getting the password from a file
   */
  @Test
  public void testGetPassword() {
    fileOpen.getFileAttributes();
    String expected = "password";
    String actual = fileOpen.getPassword();
    System.out.println(fileOpen.getPassword());
    assertEquals(expected, actual);
  }

  /**
   * Tests trying to open a file that doesn't exist
   */
  @Test
  public void testErrror() {
    Path path = Path.of(new File("src/test/resources/fail.txt").getPath());
    FileOpen fileOpen1 = new FileOpen(path);
    assertThrows(RuntimeException.class, () -> fileOpen1.getFileAttributes());
  }
}
